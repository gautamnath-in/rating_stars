<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
            crossorigin="anonymous"
        >
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <!-- Button trigger modal -->
        <button
            type="button"
            class="btn btn-outline-secondary"
            data-toggle="modal"
            data-target="#ratingModal"
            id="ratingBtn"
        >
            Click to Rate Us
        </button>
        <div
            class="modal"
            tabindex="-1"
            role="dialog"
            id="ratingModal"
        >
            <div class="modal-dialog  modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close"
                        >
                            <span aria-hidden="true"></span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h5 class="modal-title">How easy was it to find what you were looking for?</h5>
                        <div class="d-flex py-custom">
                            <div class="rating-text">Very Difficult</div>
                            <div
                                id="1"
                                class="rating"
                                onclick="saveRating('1');"
                                onmouseover="hoverRating('1')"
                                onmouseout="hoverOut('1')"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                >
                                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                                </svg>
                            </div>
                            <div
                                id="2"
                                class="rating"
                                onclick="saveRating('2');"
                                onmouseover="hoverRating('2')"
                                onmouseout="hoverOut('2')"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                >
                                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                                </svg>
                            </div>
                            <div
                                id="3"
                                class="rating"
                                onclick="saveRating('3');"
                                onmouseover="hoverRating('3')"
                                onmouseout="hoverOut('3')"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                >
                                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                                </svg>
                            </div>
                            <div
                                id="4"
                                class="rating"
                                onclick="saveRating('4');"
                                onmouseover="hoverRating('4')"
                                onmouseout="hoverOut('4')"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                >
                                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                                </svg>
                            </div>
                            <div
                                id="5"
                                class="rating"
                                onclick="saveRating('5');"
                                onmouseover="hoverRating('5')"
                                onmouseout="hoverOut('5')"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                >
                                    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
                                </svg>
                            </div>
                            <div class="rating-text">Very Easy</div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button
                            type="button"
                            class="btn btn-primary"
                            onclick="onRatingSubmit()"
                            disabled
                        >Submit</button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script>
        let rating = 0;

        function hoverRating(number) {
            for (i = 0; i <= number; i++) {
                jQuery(`#` + [i] + ' svg').addClass('fill');
            }
        }

        function saveRating(number) {
            rating = number;
            jQuery('#ratingModal button').removeAttr('disabled');
            jQuery('path').css('fill', '#ebf4ff');
            for (i = 0; i <= rating; i++) {
                jQuery(`#` + [i] + ' path').css('fill', '#ffc200');
            }
        }

        function hoverOut(number) {
            for (i = 0; i <= number; i++) {
                jQuery(`#` + [i] + ' svg').removeClass('fill');
            }
        }

        function onRatingSubmit() {
            jQuery('#ratingModal .modal-title').text('Thank you for your feedback!')
            jQuery('#ratingModal .modal-footer button').text('Close');
            jQuery('#ratingModal .rating').css('pointer-events', 'none');
            jQuery('#ratingModal .modal-footer button:contains(Close)').click(() => jQuery(
                '#ratingModal.modal,.modal-backdrop').hide());
            // console.log(rating) [[[[____for dev use____]]]
        }


        // ____________below jQuery is to re-enable user rating [[FUTURE USE IF REQUIRED]]____________
        // jQuery(document).on('show.bs.modal', '#ratingModal', function () {
        //     jQuery('#ratingModal .rating').removeAttr('style')
        // });
        </script>
    </body>
</html>
